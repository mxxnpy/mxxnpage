import"./chunk-CN3KJQZ5.js";import{a as I}from"./chunk-WVJ4THD7.js";import{b as M}from"./chunk-VWZQ25EH.js";import"./chunk-RYURSFJD.js";import{b as x}from"./chunk-NPZAEN6L.js";import"./chunk-RTN6BW2H.js";import{Ja as u,La as r,Ob as S,Pa as C,Pb as w,Ta as y,Vb as _,Wa as d,ab as a,da as f,ea as g,eb as i,fb as n,gb as m,mb as c,ub as l,vb as v,wb as h}from"./chunk-MR52UAL5.js";function b(e,p){e&1&&(i(0,"div",3),f(),i(1,"svg",4)(2,"path",5),m(3,"animateTransform",6),n()(),g(),i(4,"span"),l(5,"Loading top tracks..."),n()())}function V(e,p){if(e&1&&(i(0,"div",7),l(1),n()),e&2){let t=c();r(),h(" ",t.error," ")}}function H(e,p){e&1&&(i(0,"div",3),l(1," No top tracks found "),n())}function F(e,p){if(e&1&&(i(0,"div",20),m(1,"img",21),n()),e&2){let t=c().$implicit;r(),a("src",t.albumArt,u)("alt",t.name)}}function L(e,p){if(e&1&&(i(0,"a",22),f(),i(1,"svg",23),m(2,"path",24),n()()),e&2){let t=c().$implicit;a("href",t.url,u)}}function z(e,p){if(e&1&&(i(0,"div",13)(1,"div",14),l(2),n(),d(3,F,2,2,"div",15),i(4,"div",16)(5,"div",17),l(6),n(),i(7,"div",18),l(8),n()(),d(9,L,3,1,"a",19),n()),e&2){let t=p.$implicit,o=p.index;r(2),v(o+1),r(),a("ngIf",t.albumArt),r(3),v(t.name),r(2),v(t.artist),r(),a("ngIf",t.url)}}function $(e,p){if(e&1&&(i(0,"div")(1,"div",8),f(),i(2,"svg",9),m(3,"path",10),n(),g(),i(4,"span"),l(5,"Top Tracks"),n()(),i(6,"div",11),d(7,z,10,5,"div",12),n()()),e&2){let t=c();r(7),a("ngForOf",t.tracks)}}var A=(()=>{class e{constructor(t){this.spotifyService=t,this.tracks=[],this.loading=!0,this.error=null}ngOnInit(){this.loadTopTracks()}loadTopTracks(){this.loading=!0,this.error=null,this.spotifyService.getTopItems("tracks","short_term",10).subscribe({next:t=>{t&&t.items&&(this.tracks=t.items.map(o=>({name:o.name,artist:o.artists.map(s=>s.name).join(", "),albumArt:o.album?.images?.[0]?.url,url:o.external_urls?.spotify,duration:o.duration_ms}))),this.loading=!1},error:t=>{console.error("Error loading top tracks:",t),t.status===401?(this.error="Authentication required",window.location.href=`${window.location.origin.replace("4202","3000")}/backend/spotify/auth/login`):this.error="Failed to load top tracks",this.loading=!1}})}static{this.\u0275fac=function(o){return new(o||e)(C(x))}}static{this.\u0275cmp=y({type:e,selectors:[["app-spotify-top-tracks"]],decls:4,vars:4,consts:[["class","status-item",4,"ngIf"],["class","status-item error",4,"ngIf"],[4,"ngIf"],[1,"status-item"],["viewBox","0 0 24 24","width","16","height","16",1,"icon"],["fill","currentColor","d","M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"],["attributeName","transform","attributeType","XML","type","rotate","from","0 12 12","to","360 12 12","dur","1s","repeatCount","indefinite"],[1,"status-item","error"],[1,"now-playing-header"],["viewBox","0 0 24 24","width","24","height","24",1,"icon"],["fill","currentColor","d","M12,3V12.26C11.5,12.09 11,12 10.5,12C8.56,12 7,13.56 7,15.5C7,17.44 8.56,19 10.5,19C12.44,19 14,17.44 14,15.5V6H18V3H12Z"],[1,"tracks-list"],["class","track-item",4,"ngFor","ngForOf"],[1,"track-item"],[1,"track-rank"],["class","track-image",4,"ngIf"],[1,"track-info"],[1,"track-name"],[1,"track-artist"],["target","_blank","class","track-link",3,"href",4,"ngIf"],[1,"track-image"],[3,"src","alt"],["target","_blank",1,"track-link",3,"href"],["viewBox","0 0 24 24","width","16","height","16"],["fill","currentColor","d","M14,3V5H17.59L7.76,14.83L9.17,16.24L19,6.41V10H21V3M19,19H5V5H12V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19Z"]],template:function(o,s){o&1&&d(0,b,6,0,"div",0)(1,V,2,1,"div",1)(2,H,2,0,"div",0)(3,$,8,1,"div",2),o&2&&(a("ngIf",s.loading),r(),a("ngIf",s.error),r(),a("ngIf",!s.loading&&!s.error&&s.tracks.length===0),r(),a("ngIf",!s.loading&&!s.error&&s.tracks.length>0))},dependencies:[_,S,w,M],styles:[".tracks-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-top:16px;max-width:650px}.track-item[_ngcontent-%COMP%]{display:flex;align-items:center;background:#ffffff05;border-radius:4px;padding:12px}.track-rank[_ngcontent-%COMP%]{width:24px;opacity:.6;font-size:14px;text-align:center;margin-right:12px}.track-image[_ngcontent-%COMP%]{width:50px;height:50px;margin-right:16px;border-radius:4px;overflow:hidden}.track-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.track-info[_ngcontent-%COMP%]{flex:1;min-width:0}.track-name[_ngcontent-%COMP%]{font-weight:500;font-size:14px;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.track-artist[_ngcontent-%COMP%]{font-size:13px;opacity:.6;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.track-link[_ngcontent-%COMP%]{color:#f4d03f;border:none;display:inline-flex;align-items:center;margin-left:16px;opacity:.9;transition:opacity .2s}.track-link[_ngcontent-%COMP%]:hover{opacity:1}"]})}}return e})();function N(e,p){e&1&&(i(0,"div",3),f(),i(1,"svg",4)(2,"path",5),m(3,"animateTransform",6),n()(),g(),i(4,"span"),l(5,"Loading top artists..."),n()())}function j(e,p){if(e&1&&(i(0,"div",7),l(1),n()),e&2){let t=c();r(),h(" ",t.error," ")}}function D(e,p){e&1&&(i(0,"div",3),l(1," No top artists found "),n())}function B(e,p){if(e&1&&(i(0,"div",20),l(1),n()),e&2){let t=c().$implicit;r(),h(" ",t.genres.slice(0,2).join(", ")," ")}}function G(e,p){if(e&1&&(i(0,"a",21),l(1," Open in Spotify "),n()),e&2){let t=c().$implicit;a("href",t.url,u)}}function Z(e,p){if(e&1&&(i(0,"div",13)(1,"div",14),m(2,"img",15),n(),i(3,"div",16)(4,"div",17),l(5),n(),d(6,B,2,1,"div",18)(7,G,2,1,"a",19),n()()),e&2){let t=p.$implicit;r(2),a("src",t.image,u)("alt",t.name),r(3),v(t.name),r(),a("ngIf",t.genres&&t.genres.length>0),r(),a("ngIf",t.url)}}function U(e,p){if(e&1&&(i(0,"div")(1,"div",8),f(),i(2,"svg",9),m(3,"path",10),n(),g(),i(4,"span"),l(5,"Top Artists"),n()(),i(6,"div",11),d(7,Z,8,5,"div",12),n()()),e&2){let t=c();r(7),a("ngForOf",t.artists)}}var E=(()=>{class e{constructor(t){this.spotifyService=t,this.artists=[],this.loading=!0,this.error=null}ngOnInit(){this.loadTopArtists()}loadTopArtists(){this.loading=!0,this.error=null,this.spotifyService.getTopItems("artists","short_term",6).subscribe({next:t=>{t&&t.items&&(this.artists=t.items.map(o=>({name:o.name,image:o.images?.[0]?.url,genres:o.genres,url:o.external_urls?.spotify,popularity:o.popularity}))),this.loading=!1},error:t=>{console.error("Error loading top artists:",t),t.status===401?(this.error="Authentication required",window.location.href=`${window.location.origin.replace("4202","3000")}/backend/spotify/auth/login`):this.error="Failed to load top artists",this.loading=!1}})}static{this.\u0275fac=function(o){return new(o||e)(C(x))}}static{this.\u0275cmp=y({type:e,selectors:[["app-spotify-top-artists"]],decls:4,vars:4,consts:[["class","status-item",4,"ngIf"],["class","status-item error",4,"ngIf"],[4,"ngIf"],[1,"status-item"],["viewBox","0 0 24 24","width","16","height","16",1,"icon"],["fill","currentColor","d","M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"],["attributeName","transform","attributeType","XML","type","rotate","from","0 12 12","to","360 12 12","dur","1s","repeatCount","indefinite"],[1,"status-item","error"],[1,"now-playing-header"],["viewBox","0 0 24 24","width","24","height","24",1,"icon"],["fill","currentColor","d","M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,4A8,8 0 0,1 20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4M10,16.5L16,12L10,7.5V16.5Z"],[1,"artists-grid"],["class","artist-card",4,"ngFor","ngForOf"],[1,"artist-card"],[1,"artist-image"],[3,"src","alt"],[1,"artist-info"],[1,"artist-name"],["class","artist-genres",4,"ngIf"],["target","_blank","class","artist-link",3,"href",4,"ngIf"],[1,"artist-genres"],["target","_blank",1,"artist-link",3,"href"]],template:function(o,s){o&1&&d(0,N,6,0,"div",0)(1,j,2,1,"div",1)(2,D,2,0,"div",0)(3,U,8,1,"div",2),o&2&&(a("ngIf",s.loading),r(),a("ngIf",s.error),r(),a("ngIf",!s.loading&&!s.error&&s.artists.length===0),r(),a("ngIf",!s.loading&&!s.error&&s.artists.length>0))},dependencies:[_,S,w,M],styles:[".artists-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:16px;max-width:650px}.artist-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#ffffff05;border-radius:4px;overflow:hidden}.artist-image[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;overflow:hidden}.artist-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.artist-info[_ngcontent-%COMP%]{padding:12px;display:flex;flex-direction:column}.artist-name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.artist-genres[_ngcontent-%COMP%]{font-size:12px;opacity:.6;margin-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.artist-link[_ngcontent-%COMP%]{color:#f4d03f;opacity:.9;transition:opacity .2s;text-decoration:none;font-size:12px;margin-top:4px}.artist-link[_ngcontent-%COMP%]:hover{opacity:1}@media (max-width: 600px){.artists-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"]})}}return e})();function q(e,p){e&1&&(i(0,"div",3),f(),i(1,"svg",4)(2,"path",5),m(3,"animateTransform",6),n()(),g(),i(4,"span"),l(5,"Loading playlists..."),n()())}function X(e,p){if(e&1&&(i(0,"div",7),l(1),n()),e&2){let t=c();r(),h(" ",t.error," ")}}function R(e,p){e&1&&(i(0,"div",3),l(1," No playlists found "),n())}function J(e,p){if(e&1&&(i(0,"div",20),l(1),n()),e&2){let t=c().$implicit;r(),h(" ",t.trackCount," tracks ")}}function K(e,p){if(e&1&&(i(0,"a",21),l(1," Open in Spotify "),n()),e&2){let t=c().$implicit;a("href",t.url,u)}}function Q(e,p){if(e&1&&(i(0,"div",13)(1,"div",14),m(2,"img",15),n(),i(3,"div",16)(4,"div",17),l(5),n(),d(6,J,2,1,"div",18)(7,K,2,1,"a",19),n()()),e&2){let t=p.$implicit;r(2),a("src",t.image||"assets/icons/spotify.svg",u)("alt",t.name),r(3),v(t.name),r(),a("ngIf",t.trackCount!==void 0),r(),a("ngIf",t.url)}}function W(e,p){if(e&1&&(i(0,"div")(1,"div",8),f(),i(2,"svg",9),m(3,"path",10),n(),g(),i(4,"span"),l(5,"Playlists"),n()(),i(6,"div",11),d(7,Q,8,5,"div",12),n()()),e&2){let t=c();r(7),a("ngForOf",t.playlists)}}var O=(()=>{class e{constructor(t){this.spotifyService=t,this.playlists=[],this.loading=!0,this.error=null}ngOnInit(){this.loadPlaylists()}loadPlaylists(){this.loading=!0,this.error=null,this.spotifyService.getPlaylists().subscribe({next:t=>{t&&t.items&&(this.playlists=t.items.map(o=>({name:o.name,image:o.images?.[0]?.url,url:o.external_urls?.spotify,trackCount:o.tracks?.total,owner:o.owner?.display_name}))),this.loading=!1},error:t=>{console.error("Error loading playlists:",t),t.status===401?(this.error="Authentication required",window.location.href=`${window.location.origin.replace("4202","3000")}/backend/spotify/auth/login`):this.error="Failed to load playlists",this.loading=!1}})}static{this.\u0275fac=function(o){return new(o||e)(C(x))}}static{this.\u0275cmp=y({type:e,selectors:[["app-spotify-playlists"]],decls:4,vars:4,consts:[["class","status-item",4,"ngIf"],["class","status-item error",4,"ngIf"],[4,"ngIf"],[1,"status-item"],["viewBox","0 0 24 24","width","16","height","16",1,"icon"],["fill","currentColor","d","M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z"],["attributeName","transform","attributeType","XML","type","rotate","from","0 12 12","to","360 12 12","dur","1s","repeatCount","indefinite"],[1,"status-item","error"],[1,"now-playing-header"],["viewBox","0 0 24 24","width","24","height","24",1,"icon"],["fill","currentColor","d","M15,6H3V8H15V6M15,10H3V12H15V10M3,16H11V14H3V16M17,6V14.18C16.69,14.07 16.35,14 16,14A3,3 0 0,0 13,17A3,3 0 0,0 16,20A3,3 0 0,0 19,17V8H22V6H17Z"],[1,"playlists-grid"],["class","playlist-card",4,"ngFor","ngForOf"],[1,"playlist-card"],[1,"playlist-image"],[3,"src","alt"],[1,"playlist-info"],[1,"playlist-name"],["class","playlist-tracks",4,"ngIf"],["target","_blank","class","playlist-link",3,"href",4,"ngIf"],[1,"playlist-tracks"],["target","_blank",1,"playlist-link",3,"href"]],template:function(o,s){o&1&&d(0,q,6,0,"div",0)(1,X,2,1,"div",1)(2,R,2,0,"div",0)(3,W,8,1,"div",2),o&2&&(a("ngIf",s.loading),r(),a("ngIf",s.error),r(),a("ngIf",!s.loading&&!s.error&&s.playlists.length===0),r(),a("ngIf",!s.loading&&!s.error&&s.playlists.length>0))},dependencies:[_,S,w,M],styles:[".playlists-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:16px;max-width:650px}.playlist-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#ffffff05;border-radius:4px;overflow:hidden}.playlist-image[_ngcontent-%COMP%]{width:100%;aspect-ratio:1;overflow:hidden}.playlist-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.playlist-info[_ngcontent-%COMP%]{padding:12px;display:flex;flex-direction:column}.playlist-name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;margin-bottom:4px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.playlist-tracks[_ngcontent-%COMP%]{font-size:12px;opacity:.6;margin-bottom:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.playlist-link[_ngcontent-%COMP%]{color:#f4d03f;opacity:.9;transition:opacity .2s;text-decoration:none;font-size:12px;margin-top:4px}.playlist-link[_ngcontent-%COMP%]:hover{opacity:1}@media (max-width: 600px){.playlists-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"]})}}return e})();var xt=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275cmp=y({type:e,selectors:[["app-spotify"]],decls:10,vars:0,consts:[[1,"page-title"],[1,"spotify-section"]],template:function(o,s){o&1&&(i(0,"h1",0),l(1,"Spotify"),n(),i(2,"section",1),m(3,"app-spotify-player"),n(),i(4,"section",1),m(5,"app-spotify-top-tracks"),n(),i(6,"section",1),m(7,"app-spotify-top-artists"),n(),i(8,"section",1),m(9,"app-spotify-playlists"),n())},dependencies:[_,I,A,E,O],styles:[".page-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;margin-bottom:1.5rem;letter-spacing:-.03em}.spotify-section[_ngcontent-%COMP%]{margin-bottom:2.5rem}@media (max-width: 650px){.page-title[_ngcontent-%COMP%]{font-size:1.75rem;margin-bottom:1.25rem}.spotify-section[_ngcontent-%COMP%]{margin-bottom:2rem}}"]})}}return e})();export{xt as SpotifyComponent};
