import{a as l}from"./chunk-BSY3UMCF.js";import{N as i,P as p,U as h,o as n,z as e}from"./chunk-ADBPSF2C.js";var o={production:!1,apiUrl:"https://mxxnpage-bff.vercel.app/backend",weatherApiUrl:"https://mxxnpage-bff.vercel.app/backend/weather",githubApiUrl:"https://mxxnpage-bff.vercel.app/backend/github",spotifyApiUrl:"https://mxxnpage-bff.vercel.app/backend/spotify",discordApiUrl:"https://mxxnpage-bff.vercel.app/backend/discord",baseUrl:"https://mxxnpy.github.io"};var y=(()=>{class s{constructor(t){this.http=t,this.apiUrl=o.apiUrl+"/spotify",this.developerActivityUrl=this.apiUrl+"/developer-activity",this.isAuthenticated=!1,new URLSearchParams(window.location.search).get("auth_success")==="true"&&(this.isAuthenticated=!0,window.history.replaceState({},document.title,window.location.pathname))}getNowPlaying(){return this.http.get(`${this.apiUrl}/current-track`).pipe(i(()=>this.isAuthenticated=!0),e(this.handleError))}getRecentlyPlayed(t=10){return this.http.get(`${this.apiUrl}/recently-played`,{params:{limit:t.toString()}}).pipe(i(()=>this.isAuthenticated=!0),e(this.handleError))}getTopItems(t,r="medium_term",a=10){return this.http.get(`${this.apiUrl}/top/${t}`,{params:{time_range:r,limit:a.toString()}}).pipe(i(()=>this.isAuthenticated=!0),e(this.handleError))}getPlaylists(t=20,r=0){return this.http.get(`${this.apiUrl}/playlists`,{params:{limit:t.toString(),offset:r.toString()}}).pipe(i(()=>this.isAuthenticated=!0),e(this.handleError))}getPlaylistTracks(t,r=20,a=0){return this.http.get(`${this.apiUrl}/playlists/${t}/tracks`,{params:{limit:r.toString(),offset:a.toString()}}).pipe(i(()=>this.isAuthenticated=!0),e(this.handleError))}getWorkHoursAnalysis(){return this.http.get(`${this.developerActivityUrl}/work-hours-analysis`).pipe(e(this.handleError))}getProductivityCorrelation(){return this.http.get(`${this.developerActivityUrl}/productivity-correlation`).pipe(e(this.handleError))}getListeningPatterns(t="week"){return this.http.get(`${this.developerActivityUrl}/listening-patterns`,{params:{period:t}}).pipe(e(this.handleError))}authorize(){window.location.href=`${o.apiUrl}/spotify/auth/login`}checkAuthentication(){return this.http.get(`${this.apiUrl}/current-user`).pipe(i(()=>this.isAuthenticated=!0),e(t=>(this.isAuthenticated=!1,n(t))))}logout(){return this.http.get(`${this.apiUrl}/auth/logout`).pipe(i(()=>this.isAuthenticated=!1),e(this.handleError))}handleError(t){return t.status===0?console.error("An error occurred:",t.error):t.status===401?console.error("Authentication required:",t.error):console.error(`Backend returned code ${t.status}, body was:`,t.error),n(t)}static{this.\u0275fac=function(r){return new(r||s)(h(l))}}static{this.\u0275prov=p({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();export{o as a,y as b};
